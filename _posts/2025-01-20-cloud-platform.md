---
layout: post
title: 云平台学习
categories: [ cloud, platform ]
description: some word here
keywords: cloud, platform
mermaid: false
sequence: false
flow: false
mathjax: false
mindmap: false
mindmap2: false
---

# 云平台核心概念与实战操作

## 1. 云平台简介
- **云平台 vs 本地**：云平台是相对于本地开发环境而言的，应用最终需要部署到远程服务器上，而不是开发人员的本机电脑。
- **公有云**：通过购买第三方云厂商（如阿里云、腾讯云等）提供的硬件资源来部署应用。
- **私有云**：自建机房，购买服务器、网关、路由器等设备，构建自己的云平台。

## 2. 使用云平台的优势
- **环境统一**：可以为所有服务器指定统一的环境，消除环境对应用的影响。
- **按需付费**：根据业务需求灵活调整资源使用量。
- **即开即用**：资源可以快速启用，节省时间。
- **稳定性强**：第三方云厂商有专业的运维团队，提供更高的稳定性。

## 3. 常见云平台
- **国内**：阿里云、百度云、腾讯云、华为云、轻云等。
- **国外**：亚马逊AWS、微软Azure、谷歌云等。

## 4. 公有云与私有云的比较
- **公有云**：
    - **优势**：成本低、无需维护、资源缩放性强、高可靠性。
    - **缺点**：数据安全性较低，不适合高安全性要求的场景。
- **私有云**：
    - **优势**：灵活性强、控制力强、数据安全性高。
    - **缺点**：需要自建机房和维护团队，成本较高。

## 5. 混合云架构
- **混合云**：结合公有云和私有云的优势，部分业务托管在公有云上，核心业务保留在私有云中，形成混合云架构。

## 6. 云平台的可用性指标
- **可用性**：通常用“N个9”来表示系统的可靠性，如99.999%的可用性意味着全年故障时间只有几十秒。

## 7. 实战操作
- 接下来的课程将使用轻云平台进行实战操作，轻云内置了KuboSphere自托管平台，稳定性更高。
- 操作云平台的基本概念和流程在不同云平台之间是通用的，掌握一个平台后可以轻松迁移到其他平台。



# 云平台实战操作指南

## 1. 注册与登录
- **注册流程**：首次使用云平台需先注册，推荐使用新用户优惠活动进行注册。
- **登录方式**：可以使用支付宝、淘宝账户等登录云平台。

## 2. 购买云服务器
- **控制台入口**：登录后进入控制台，所有操作均从控制台开始。
- **选择服务器类型**：在控制台中选择“云服务器ECS”，点击“创建实例”来购买服务器。
- **按量付费**：适合实验使用，费用按小时计算，实验结束后可释放服务器，节省成本。
- **选择配置**：根据需求选择服务器配置，如CPU、内存、操作系统等。
- **公共镜像**：选择公共镜像来安装操作系统，如CentOS 7.9。

## 3. 充值与支付
- **充值要求**：按量付费需先充值，建议充值100元起步。
- **支付方式**：支持多种支付方式，充值后即可继续购买服务器。

## 4. 网络配置
- **公网IP**：为服务器分配公网IP，以便远程访问。
- **流量计费**：选择按使用流量计费，适合实验使用，费用较低。

## 5. 系统配置
- **设置密码**：为服务器设置登录密码，需包含大小写字母和数字。
- **实例命名**：为服务器命名，便于识别和管理。

## 6. 创建实例
- **确认订单**：确认服务器配置无误后，点击“创建实例”。
- **启动服务器**：服务器创建后，几秒内即可启动，支持即开即用。

## 7. 连接服务器
- **公网IP**：使用公网IP连接服务器，端口默认为22。
- **连接工具**：使用Linux连接工具（如ET）连接服务器，输入用户名和密码即可登录。

## 8. 服务器操作
- **目录结构**：登录后可查看服务器的目录结构，进行文件操作。
- **安装软件**：可在服务器上安装所需软件进行测试。

## 9. 注意事项
- **新用户优惠**：新用户注册后可享受优惠活动，建议先购买服务器再进行实验。
- **按量付费优势**：按量付费适合短期实验，费用低且灵活。
- **公网IP费用**：选择公网IP会增加费用，但便于远程访问和管理。




# Nginx配置与安全组设置

## 1. 修改Nginx配置文件
- **配置文件位置**：Nginx的配置文件位于`/etc/nginx/nginx.conf`。
- **修改监听端口**：将Nginx默认监听的80端口改为88端口。
  - 修改配置文件中`listen 80`为`listen 88`。
  - 保存并退出配置文件。

## 2. 重启Nginx服务
- **重启命令**：使用`systemctl restart nginx`命令重启Nginx服务，使配置生效。

## 3. 测试端口访问
- **80端口测试**：访问80端口时，页面无法加载，因为Nginx不再监听80端口。
- **88端口测试**：访问88端口时，页面仍然无法加载，尽管Nginx在本机上监听88端口。

## 4. 安全组配置
- **安全组概念**：安全组是云服务器厂商提供的防火墙功能，用于控制服务器的入站和出站流量。
- **查看安全组**：在云服务器控制台中，找到服务器的安全组配置。
- **添加入站规则**：
  - 添加一条TCP协议的入站规则，允许88端口的访问。
  - 设置源IP为`0.0.0.0/0`，表示允许所有IP访问88端口。
- **保存规则**：保存安全组规则后，重新访问88端口，页面加载成功。

## 5. 总结
- **安全组的重要性**：在云服务器中，安全组是控制端口访问的关键配置，必须确保所需端口在安全组中开放。
- **Nginx配置与安全组配合**：修改Nginx监听端口后，需同步更新安全组规则，确保外部访问正常。




# 按量付费服务器的停机与启动操作

## 1. 停机操作
- **进入控制台**：登录云服务器控制台，找到正在运行的实例。
- **停止实例**：在实例列表中选择需要停机的服务器，点击“停止”按钮。
- **停机不收费选项**：选择“停机不收费”模式，此时计算资源（CPU、内存）将不再收费，但数据盘和弹性公网IP仍会保留并产生少量费用。
- **确认停机**：点击“确定”后，服务器将停止运行，进入停机状态。

## 2. 停机后的费用
- **计算资源**：停机后，CPU和内存不再收费。
- **数据盘与公网IP**：数据盘和弹性公网IP会继续保留，并产生少量费用。

## 3. 重新启动服务器
- **启动实例**：在实例列表中选择已停机的服务器，点击“启动”按钮。
- **公网IP不变**：重新启动后，服务器的公网IP保持不变。
- **重新连接**：使用之前的登录信息（IP、用户名、密码）重新连接服务器。
- **服务恢复**：服务器上的所有数据和配置保持不变，但需要手动启动某些服务（如Nginx）。

## 4. 总结
- **按量付费的优势**：按量付费模式允许用户在不需要服务器时停机，节省计算资源的费用，同时保留数据盘和公网IP。
- **停机与启动的便捷性**：停机后，服务器可以随时重新启动，所有配置和数据保持不变，适合实验和临时使用场景。




# 云服务器网络概念与集群创建

## 1. 云服务器的IP地址
- **公网IP**：用于外部访问服务器的IP地址，按量付费模式下，每次启动服务器时公网IP可能会变化。
- **私有IP**：服务器内部使用的IP地址，通常固定不变，用于集群内部通信。

## 2. 公网IP的变化与连接
- **公网IP变化**：按量付费模式下，服务器重启后公网IP可能会变化，需使用新的公网IP进行连接。
- **重新连接**：使用新的公网IP和端口（如88端口）重新连接服务器，确保服务正常运行。

## 3. 集群内部通信
- **私有IP通信**：集群内部的服务器之间使用私有IP进行通信，避免走公网流量，节省费用并提高速度。
- **私有IP的优势**：私有IP通信速度快，不受公网带宽限制，适合集群内部的高效通信。

## 4. 专有网络（VPC）
- **VPC概念**：VPC（Virtual Private Cloud）是云平台提供的私有网络，用于隔离和管理服务器集群。
- **VPC的网段规划**：VPC可以自定义网段，如`192.168.0.0/16`，表示该VPC下可以容纳6万多台机器。
- **子网划分**：在VPC下可以进一步划分子网（交换机），每个子网可以容纳254台机器（如`192.168.0.0/24`）。

## 5. VPC的隔离性
- **VPC之间的隔离**：不同VPC之间的服务器无法通过私有IP直接通信，即使它们的网段相同。
- **VPC的应用场景**：VPC可以用于隔离开发环境和生产环境，确保安全性。

## 6. 创建服务器集群
- **批量创建服务器**：在VPC下可以批量创建多台服务器，选择加入特定的子网（交换机）。
- **网络配置**：创建服务器时，选择加入VPC和子网，确保服务器在同一个私有网络下，能够通过私有IP互相通信。

## 7. 服务器释放与清理
- **停机不收费**：停止服务器后，计算资源不再收费，但数据盘和公网IP仍会产生少量费用。
- **释放资源**：如果不再使用服务器，可以释放资源，避免产生额外费用。

## 8. 总结
- **VPC的重要性**：VPC提供了网络隔离和灵活的子网划分，适合构建复杂的服务器集群。
- **私有IP的优势**：集群内部使用私有IP通信，速度快且节省费用。
- **按量付费的灵活性**：按量付费模式适合临时实验和短期使用，停机后可以节省计算资源费用。
